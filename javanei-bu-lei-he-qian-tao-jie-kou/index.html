<!DOCTYPE html>
<html lang="en">
    <head>
      <meta http-equiv="X-UA-Compatible" content="IE=edge">
      <meta http-equiv="content-type" content="text/html; charset=utf-8">

      <!-- Enable responsiveness on mobile devices-->
      <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1">

      <title> - Java内部类和嵌套接口</title>

      

      
          <script src="https://cdnjs.cloudflare.com/ajax/libs/slideout/1.0.1/slideout.min.js"></script>
          
          <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.10.0/dist/katex.min.css" integrity="sha384-9eLZqc9ds8eNjO3TmqPeYcDj8n+Qfa4nuSiGYa6DjLNcv9BtN69ZIulL9+8CqC9Y" crossorigin="anonymous">

          <script defer src="https://cdn.jsdelivr.net/npm/katex@0.10.0/dist/katex.min.js" integrity="sha384-K3vbOmF2BtaVai+Qk37uypf7VrgBubhQreNQe9aGsz9lB63dIFiQVlJbr92dw2Lx" crossorigin="anonymous"></script>
          <script defer src="https://cdn.jsdelivr.net/npm/katex@0.10.0/dist/contrib/mathtex-script-type.min.js" integrity="sha384-zWYbd0NBwgTsgIdFKVprSfTh1mbMPe5Hz1X3yY4Sd1h/K1cQoUe36OGwAGz/PcDy" crossorigin="anonymous"></script>
              
          <script defer src="https://cdn.jsdelivr.net/npm/katex@0.10.0/dist/contrib/auto-render.min.js" integrity="sha384-kmZOZB5ObwgQnS/DuDg6TScgOiWWBiVt0plIRkZCmE6rDZGrEOQeHM5PcHi+nyqe" crossorigin="anonymous"
                  onload="renderMathInElement(document.body);"></script>
              
          
      

      
          <link rel="stylesheet" href="https:&#x2F;&#x2F;www.fewth.com&#x2F;site.css">
          
          <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.10.0/dist/katex.min.css" integrity="sha384-9eLZqc9ds8eNjO3TmqPeYcDj8n+Qfa4nuSiGYa6DjLNcv9BtN69ZIulL9+8CqC9Y" crossorigin="anonymous">
          
      

      
      
    </head>

    <body>
        <div class="container">

            <div id="mobile-navbar" class="mobile-navbar">
              <div class="mobile-header-logo">
                <a href="/" class="logo">Even</a>
              </div>
              <div class="mobile-navbar-icon icon-out">
                <span></span>
                <span></span>
                <span></span>
              </div>
            </div>

            <nav id="mobile-menu" class="mobile-menu slideout-menu slideout-menu-left">
              <ul class="mobile-menu-list">
                
                    <li class="mobile-menu-item">
                        <a href="https:&#x2F;&#x2F;www.fewth.com">
                            Home
                        </a>
                    </li>
                
                    <li class="mobile-menu-item">
                        <a href="https:&#x2F;&#x2F;www.fewth.com&#x2F;categories">
                            Categories
                        </a>
                    </li>
                
                    <li class="mobile-menu-item">
                        <a href="https:&#x2F;&#x2F;www.fewth.com&#x2F;tags">
                            Tags
                        </a>
                    </li>
                
                    <li class="mobile-menu-item">
                        <a href="https:&#x2F;&#x2F;www.fewth.com&#x2F;about">
                            About
                        </a>
                    </li>
                
              </ul>
            </nav>

            <header id="header">
                <div class="logo"><a href="https:&#x2F;&#x2F;www.fewth.com">Even</a></div>
                <nav class="menu">
                    <ul>
                        
                            <li>
                                <a href="https:&#x2F;&#x2F;www.fewth.com">
                                    Home
                                </a>
                            </li>
                        
                            <li>
                                <a href="https:&#x2F;&#x2F;www.fewth.com&#x2F;categories">
                                    Categories
                                </a>
                            </li>
                        
                            <li>
                                <a href="https:&#x2F;&#x2F;www.fewth.com&#x2F;tags">
                                    Tags
                                </a>
                            </li>
                        
                            <li>
                                <a href="https:&#x2F;&#x2F;www.fewth.com&#x2F;about">
                                    About
                                </a>
                            </li>
                        
                    </ul>
                </nav>
            </header>

            <main>
                <div class="content" id="mobile-panel">
                    


<div class="post-toc" id="post-toc">
    <h2 class="post-toc-title">Contents</h2>
    <div class="post-toc-content always-active">
        <nav id="TableOfContents">
            <ul>
                
                <li>
                    <a href="https://www.fewth.com/javanei-bu-lei-he-qian-tao-jie-kou/#1-nei-bu-lei" class="toc-link">1.内部类</a>
                    
                    <ul>
                        
                        <li>
                            <a href="https://www.fewth.com/javanei-bu-lei-he-qian-tao-jie-kou/#1-1-public-nei-bu-lei" class="toc-link">1.1 public 内部类</a>
                        </li>
                        
                        <li>
                            <a href="https://www.fewth.com/javanei-bu-lei-he-qian-tao-jie-kou/#1-2-protected-privatenei-bu-lei" class="toc-link">1.2 protected、private内部类</a>
                        </li>
                        
                        <li>
                            <a href="https://www.fewth.com/javanei-bu-lei-he-qian-tao-jie-kou/#1-3-fang-fa-zhong-de-nei-bu-lei-local-ju-bu-ben-di-nei-bu-lei" class="toc-link">1.3 方法中的内部类(local&#x2F;局部&#x2F;本地内部类)</a>
                        </li>
                        
                        <li>
                            <a href="https://www.fewth.com/javanei-bu-lei-he-qian-tao-jie-kou/#1-4-ni-ming-nei-bu-lei" class="toc-link">1.4 匿名内部类</a>
                        </li>
                        
                        <li>
                            <a href="https://www.fewth.com/javanei-bu-lei-he-qian-tao-jie-kou/#1-5-staticnei-bu-lei" class="toc-link">1.5 static内部类</a>
                        </li>
                        
                    </ul>
                    
                </li>
                
                <li>
                    <a href="https://www.fewth.com/javanei-bu-lei-he-qian-tao-jie-kou/#2-jie-kou-zhong-de-qian-tao-jie-kou-he-qian-tao-lei" class="toc-link">2.接口中的嵌套接口和嵌套类</a>
                    
                </li>
                
                <li>
                    <a href="https://www.fewth.com/javanei-bu-lei-he-qian-tao-jie-kou/#3-zong-jie" class="toc-link">3 总结</a>
                    
                </li>
                
            </ul>
        </nav>
    </div>
</div>


<article class="post">
    
    <header class="post__header">
        <h1 class="post__title">
            <a href="https:&#x2F;&#x2F;www.fewth.com&#x2F;javanei-bu-lei-he-qian-tao-jie-kou&#x2F;">Java内部类和嵌套接口</a>
        </h1>
        <div class="post__meta">
            <span class="post__time">2020-11-17</span>
            
        </div>
    </header>

    <div class="post-content">
      <p>主要介绍内部类，顺便提一下接口中的嵌套接口和嵌套类。</p>
<h2 id="1-nei-bu-lei"><strong>1.内部类</strong></h2>
<p>内部类是定义在其它类中的类。这个定义很宽泛，因为内部类也可以定义在类中的方法里，可以用匿名内部类，还可以声明为public、private、protected、static，不同的情形下，内部类表现也不一致，分别举例说明。</p>
<!--more-->
<h3 id="1-1-public-nei-bu-lei"><strong>1.1 public 内部类</strong></h3>
<p>这是最普遍的情形，在一个类的内部定义另一个类，假设两个类分别叫<code>A</code>和<code>InnerA</code>，此时<code>InnerA</code>可以访问A中的属性，其它类也可以通过<code>A</code>的实例来实例化<code>InnerA</code>，因为<code>InnerA</code>是声明为<code>public</code>。为什么要通过<code>A</code>的实例呢？因为<code>InnerA</code>在<code>A</code>中跟其它属性、方法一样，属于“对象属性”,必须通过类的实例才能访问。</p>
<p><code>firstpackage</code></p>
<p>类<code>A</code></p>
<pre style="background-color:#2b303b;">
<code class="language-java" data-lang="java"><span style="color:#b48ead;">package </span><span style="color:#c0c5ce;">firstpackage;

</span><span style="color:#b48ead;">public class </span><span style="color:#ebcb8b;">A</span><span style="color:#eff1f5;">{
    </span><span style="color:#b48ead;">private </span><span style="color:#ebcb8b;">String </span><span style="color:#eff1f5;">propA;
    </span><span style="color:#b48ead;">public </span><span style="color:#8fa1b3;">A</span><span style="color:#eff1f5;">(){};
    </span><span style="color:#b48ead;">public </span><span style="color:#8fa1b3;">A</span><span style="color:#eff1f5;">(</span><span style="color:#ebcb8b;">String </span><span style="color:#bf616a;">s</span><span style="color:#eff1f5;">){
        </span><span style="color:#bf616a;">this</span><span style="color:#eff1f5;">.propA</span><span style="color:#c0c5ce;">=</span><span style="color:#eff1f5;">s;
    }
    </span><span style="color:#b48ead;">public void </span><span style="color:#8fa1b3;">say</span><span style="color:#eff1f5;">(){
        </span><span style="color:#ebcb8b;">InnerA</span><span style="color:#eff1f5;"> innerA</span><span style="color:#c0c5ce;">=</span><span style="color:#b48ead;">new </span><span style="color:#ebcb8b;">InnerA</span><span style="color:#eff1f5;">();
        innerA.</span><span style="color:#bf616a;">say</span><span style="color:#eff1f5;">();
    }
    </span><span style="color:#b48ead;">public class </span><span style="color:#ebcb8b;">InnerA</span><span style="color:#eff1f5;">{
        </span><span style="color:#b48ead;">public void </span><span style="color:#8fa1b3;">say</span><span style="color:#eff1f5;">(){
            </span><span style="color:#ebcb8b;">System</span><span style="color:#eff1f5;">.out.</span><span style="color:#bf616a;">println</span><span style="color:#eff1f5;">(</span><span style="color:#c0c5ce;">&quot;</span><span style="color:#a3be8c;">这是InnerA的say()方法，但是可以读取到外部类A的propA属性=====&gt;</span><span style="color:#c0c5ce;">&quot;+</span><span style="color:#eff1f5;">propA);
        }
    }
}
</span></code></pre>
<p><code>secondpackage</code></p>
<p>类<code>TestB</code></p>
<pre style="background-color:#2b303b;">
<code class="language-java" data-lang="java"><span style="color:#b48ead;">package </span><span style="color:#c0c5ce;">secondpackage;

</span><span style="color:#b48ead;">import </span><span style="color:#c0c5ce;">firstpackage.</span><span style="color:#ebcb8b;">A</span><span style="color:#c0c5ce;">;

</span><span style="color:#b48ead;">public class </span><span style="color:#ebcb8b;">TestB </span><span style="color:#eff1f5;">{
    </span><span style="color:#b48ead;">public static void </span><span style="color:#8fa1b3;">main</span><span style="color:#eff1f5;">(</span><span style="color:#ebcb8b;">String</span><span style="color:#b48ead;">[] </span><span style="color:#bf616a;">args</span><span style="color:#eff1f5;">) {
        </span><span style="color:#ebcb8b;">A</span><span style="color:#eff1f5;"> a</span><span style="color:#c0c5ce;">=</span><span style="color:#b48ead;">new </span><span style="color:#ebcb8b;">A</span><span style="color:#eff1f5;">(</span><span style="color:#c0c5ce;">&quot;</span><span style="color:#a3be8c;">一条来自secondpackage的信息</span><span style="color:#c0c5ce;">&quot;</span><span style="color:#eff1f5;">);
        </span><span style="color:#ebcb8b;">A</span><span style="color:#eff1f5;">.</span><span style="color:#ebcb8b;">InnerA</span><span style="color:#eff1f5;"> innerA</span><span style="color:#c0c5ce;">=</span><span style="color:#eff1f5;">a.</span><span style="color:#b48ead;">new </span><span style="color:#ebcb8b;">InnerA</span><span style="color:#eff1f5;">();
        innerA.</span><span style="color:#bf616a;">say</span><span style="color:#eff1f5;">();
    }
}

</span></code></pre>
<blockquote>
<p>输出：“这是InnerA的say()方法，但是可以读取到外部类A的propA属性=====&gt;一条来自secondpackage的信息”</p>
</blockquote>
<h3 id="1-2-protected-privatenei-bu-lei"><strong>1.2 protected、private内部类</strong></h3>
<p>这两个修饰符只能用在内部类上，普通类只能public或者不加修饰符（表示只能在同一个package内访问）。
跟属性、方法的修饰符一样，protected表示包内可以访问(也可以被子类访问，内部类基本不会这么用)，private表示只能在该外部类内部访问到这个内部类，在其它地方通过外部类也无法访问到这个内部类。</p>
<p>可以把上面的例子中的<code>TestB</code>类放到跟类<code>A</code>同一个package下来验证<code>protected</code>的行为或者把上面的例子中的<code>main</code>方法放到类<code>A</code>中来验证<code>private</code>的行为。</p>
<h3 id="1-3-fang-fa-zhong-de-nei-bu-lei-local-ju-bu-ben-di-nei-bu-lei"><strong>1.3 方法中的内部类(local/局部/本地内部类)</strong></h3>
<p>如果内部类只在方法中用到一次，那么直接把类声明在这个方法中也是可以的。这里并不能用修饰符，因为方法作用域中的内容不能被外部访问，这比<code>private</code>的作用域还要严格。方法中的内部类还可以获取方法参数传递进来的变量，并保存为本地变量。</p>
<p>下面的例子中,通过<code>say(String s)</code>方法传递进来的字符串<code>s</code>，当方法结束后，变量<code>s</code>就消失了，但是<code>InnerA</code>在使用这个变量的时候保存在了本地，后续每一次事件触发时，都能正确的输出这个变量的值。</p>
<pre style="background-color:#2b303b;">
<code class="language-java" data-lang="java"><span style="color:#b48ead;">package </span><span style="color:#c0c5ce;">firstpackage;

</span><span style="color:#b48ead;">import </span><span style="color:#c0c5ce;">javax.swing.*;
</span><span style="color:#b48ead;">import </span><span style="color:#c0c5ce;">java.awt.event.</span><span style="color:#ebcb8b;">ActionEvent</span><span style="color:#c0c5ce;">;
</span><span style="color:#b48ead;">import </span><span style="color:#c0c5ce;">java.awt.event.</span><span style="color:#ebcb8b;">ActionListener</span><span style="color:#c0c5ce;">;


</span><span style="color:#b48ead;">public class </span><span style="color:#ebcb8b;">A</span><span style="color:#eff1f5;">{
    </span><span style="color:#b48ead;">public static void </span><span style="color:#8fa1b3;">main</span><span style="color:#eff1f5;">(</span><span style="color:#ebcb8b;">String</span><span style="color:#b48ead;">[] </span><span style="color:#bf616a;">args</span><span style="color:#eff1f5;">) </span><span style="color:#b48ead;">throws </span><span style="color:#ebcb8b;">Exception</span><span style="color:#eff1f5;">{
        </span><span style="color:#ebcb8b;">A</span><span style="color:#eff1f5;"> a</span><span style="color:#c0c5ce;">=</span><span style="color:#b48ead;">new </span><span style="color:#ebcb8b;">A</span><span style="color:#eff1f5;">(</span><span style="color:#c0c5ce;">&quot;</span><span style="color:#a3be8c;">这是构造A的对象时传入的字符串</span><span style="color:#c0c5ce;">&quot;</span><span style="color:#eff1f5;">);
        a.</span><span style="color:#bf616a;">say</span><span style="color:#eff1f5;">(</span><span style="color:#c0c5ce;">&quot;</span><span style="color:#a3be8c;">这是通过方法传递的字符串</span><span style="color:#c0c5ce;">&quot;</span><span style="color:#eff1f5;">);
        </span><span style="color:#65737e;">//这里只是为了让程序保持运行
        </span><span style="color:#ebcb8b;">Thread</span><span style="color:#eff1f5;">.</span><span style="color:#bf616a;">sleep</span><span style="color:#eff1f5;">(</span><span style="color:#d08770;">5000</span><span style="color:#eff1f5;">);
        </span><span style="color:#ebcb8b;">System</span><span style="color:#eff1f5;">.</span><span style="color:#bf616a;">exit</span><span style="color:#eff1f5;">(</span><span style="color:#d08770;">0</span><span style="color:#eff1f5;">);
    }
    </span><span style="color:#b48ead;">private </span><span style="color:#ebcb8b;">String </span><span style="color:#eff1f5;">propA;
    </span><span style="color:#b48ead;">public </span><span style="color:#8fa1b3;">A</span><span style="color:#eff1f5;">(){};
    </span><span style="color:#b48ead;">public </span><span style="color:#8fa1b3;">A</span><span style="color:#eff1f5;">(</span><span style="color:#ebcb8b;">String </span><span style="color:#bf616a;">s</span><span style="color:#eff1f5;">){
        </span><span style="color:#bf616a;">this</span><span style="color:#eff1f5;">.propA</span><span style="color:#c0c5ce;">=</span><span style="color:#eff1f5;">s;
    }
    </span><span style="color:#b48ead;">public void </span><span style="color:#8fa1b3;">say</span><span style="color:#eff1f5;">(</span><span style="color:#ebcb8b;">String </span><span style="color:#bf616a;">s</span><span style="color:#eff1f5;">){
        class </span><span style="color:#ebcb8b;">InnerA</span><span style="color:#eff1f5;"> implements </span><span style="color:#ebcb8b;">ActionListener</span><span style="color:#eff1f5;">{
            @</span><span style="color:#bf616a;">Override
            </span><span style="color:#b48ead;">public</span><span style="color:#eff1f5;"> void </span><span style="color:#bf616a;">actionPerformed</span><span style="color:#eff1f5;">(</span><span style="color:#ebcb8b;">ActionEvent</span><span style="color:#eff1f5;"> e) {
                </span><span style="color:#ebcb8b;">System</span><span style="color:#eff1f5;">.out.</span><span style="color:#bf616a;">println</span><span style="color:#eff1f5;">(</span><span style="color:#c0c5ce;">&quot;</span><span style="color:#a3be8c;">这是内部类，但能获取外部类的属性========&gt;</span><span style="color:#c0c5ce;">&quot;+</span><span style="color:#eff1f5;">propA</span><span style="color:#c0c5ce;">+&quot;</span><span style="color:#96b5b4;">\n</span><span style="color:#a3be8c;">还可以获取方法的参数并保存为本地变量========&gt;</span><span style="color:#c0c5ce;">&quot;+</span><span style="color:#eff1f5;">s);
            }
        }
        </span><span style="color:#ebcb8b;">Timer</span><span style="color:#eff1f5;"> timer</span><span style="color:#c0c5ce;">=</span><span style="color:#b48ead;">new </span><span style="color:#ebcb8b;">Timer</span><span style="color:#eff1f5;">(</span><span style="color:#d08770;">1000</span><span style="color:#eff1f5;">,</span><span style="color:#b48ead;">new </span><span style="color:#ebcb8b;">InnerA</span><span style="color:#eff1f5;">());
        timer.</span><span style="color:#bf616a;">start</span><span style="color:#eff1f5;">();
    }
}
</span></code></pre>
<blockquote>
<p>输出：</p>
<p>这是内部类，但能获取外部类的属性========&gt;这是构造A的对象时传入的字符串
还可以获取方法的参数并保存为本地变量========&gt;这是通过方法传递的字符串</p>
<p>这是内部类，但能获取外部类的属性========&gt;这是构造A的对象时传入的字符串
还可以获取方法的参数并保存为本地变量========&gt;这是通过方法传递的字符串</p>
<p>这是内部类，但能获取外部类的属性========&gt;这是构造A的对象时传入的字符串
还可以获取方法的参数并保存为本地变量========&gt;这是通过方法传递的字符串</p>
<p>这是内部类，但能获取外部类的属性========&gt;这是构造A的对象时传入的字符串
还可以获取方法的参数并保存为本地变量========&gt;这是通过方法传递的字符串</p>
<p>这是内部类，但能获取外部类的属性========&gt;这是构造A的对象时传入的字符串
还可以获取方法的参数并保存为本地变量========&gt;这是通过方法传递的字符串</p>
</blockquote>
<h3 id="1-4-ni-ming-nei-bu-lei"><strong>1.4 匿名内部类</strong></h3>
<p>上面的例子，<code>InnerA</code>只是为了实现<code>ActionListener</code>接口，这种情况下，可以进一步用匿名内部类简化，连类名都不需要，如下：</p>
<pre style="background-color:#2b303b;">
<code class="language-java" data-lang="java"><span style="color:#b48ead;">package </span><span style="color:#c0c5ce;">firstpackage;

</span><span style="color:#b48ead;">import </span><span style="color:#c0c5ce;">javax.swing.*;
</span><span style="color:#b48ead;">import </span><span style="color:#c0c5ce;">java.awt.event.</span><span style="color:#ebcb8b;">ActionEvent</span><span style="color:#c0c5ce;">;
</span><span style="color:#b48ead;">import </span><span style="color:#c0c5ce;">java.awt.event.</span><span style="color:#ebcb8b;">ActionListener</span><span style="color:#c0c5ce;">;


</span><span style="color:#b48ead;">public class </span><span style="color:#ebcb8b;">A</span><span style="color:#eff1f5;">{
    </span><span style="color:#b48ead;">public static void </span><span style="color:#8fa1b3;">main</span><span style="color:#eff1f5;">(</span><span style="color:#ebcb8b;">String</span><span style="color:#b48ead;">[] </span><span style="color:#bf616a;">args</span><span style="color:#eff1f5;">) </span><span style="color:#b48ead;">throws </span><span style="color:#ebcb8b;">Exception</span><span style="color:#eff1f5;">{
        </span><span style="color:#ebcb8b;">A</span><span style="color:#eff1f5;"> a</span><span style="color:#c0c5ce;">=</span><span style="color:#b48ead;">new </span><span style="color:#ebcb8b;">A</span><span style="color:#eff1f5;">(</span><span style="color:#c0c5ce;">&quot;</span><span style="color:#a3be8c;">这是构造A的对象时传入的字符串</span><span style="color:#c0c5ce;">&quot;</span><span style="color:#eff1f5;">);
        a.</span><span style="color:#bf616a;">say</span><span style="color:#eff1f5;">(</span><span style="color:#c0c5ce;">&quot;</span><span style="color:#a3be8c;">这是通过方法传递的字符串</span><span style="color:#c0c5ce;">&quot;</span><span style="color:#eff1f5;">);
        </span><span style="color:#65737e;">//这里只是为了让程序保持运行
        </span><span style="color:#ebcb8b;">Thread</span><span style="color:#eff1f5;">.</span><span style="color:#bf616a;">sleep</span><span style="color:#eff1f5;">(</span><span style="color:#d08770;">5000</span><span style="color:#eff1f5;">);
        </span><span style="color:#ebcb8b;">System</span><span style="color:#eff1f5;">.</span><span style="color:#bf616a;">exit</span><span style="color:#eff1f5;">(</span><span style="color:#d08770;">0</span><span style="color:#eff1f5;">);
    }
    </span><span style="color:#b48ead;">private </span><span style="color:#ebcb8b;">String </span><span style="color:#eff1f5;">propA;
    </span><span style="color:#b48ead;">public </span><span style="color:#8fa1b3;">A</span><span style="color:#eff1f5;">(){};
    </span><span style="color:#b48ead;">public </span><span style="color:#8fa1b3;">A</span><span style="color:#eff1f5;">(</span><span style="color:#ebcb8b;">String </span><span style="color:#bf616a;">s</span><span style="color:#eff1f5;">){
        </span><span style="color:#bf616a;">this</span><span style="color:#eff1f5;">.propA</span><span style="color:#c0c5ce;">=</span><span style="color:#eff1f5;">s;
    }
    </span><span style="color:#b48ead;">public void </span><span style="color:#8fa1b3;">say</span><span style="color:#eff1f5;">(</span><span style="color:#ebcb8b;">String </span><span style="color:#bf616a;">s</span><span style="color:#eff1f5;">){
        </span><span style="color:#ebcb8b;">Timer</span><span style="color:#eff1f5;"> timer</span><span style="color:#c0c5ce;">=</span><span style="color:#b48ead;">new </span><span style="color:#ebcb8b;">Timer</span><span style="color:#eff1f5;">(</span><span style="color:#d08770;">1000</span><span style="color:#eff1f5;">, </span><span style="color:#b48ead;">new </span><span style="color:#ebcb8b;">ActionListener</span><span style="color:#eff1f5;">() {
            @</span><span style="color:#bf616a;">Override
            </span><span style="color:#b48ead;">public void </span><span style="color:#8fa1b3;">actionPerformed</span><span style="color:#eff1f5;">(</span><span style="color:#ebcb8b;">ActionEvent </span><span style="color:#bf616a;">e</span><span style="color:#eff1f5;">) {
                </span><span style="color:#ebcb8b;">System</span><span style="color:#eff1f5;">.out.</span><span style="color:#bf616a;">println</span><span style="color:#eff1f5;">(</span><span style="color:#c0c5ce;">&quot;</span><span style="color:#a3be8c;">这是内部类，但能获取外部类的属性========&gt;</span><span style="color:#c0c5ce;">&quot;+</span><span style="color:#eff1f5;">propA</span><span style="color:#c0c5ce;">+&quot;</span><span style="color:#96b5b4;">\n</span><span style="color:#a3be8c;">还可以获取方法的参数并保存为本地变量========&gt;</span><span style="color:#c0c5ce;">&quot;+</span><span style="color:#eff1f5;">s);
            }
        });
        timer.</span><span style="color:#bf616a;">start</span><span style="color:#eff1f5;">();
    }
}
</span></code></pre>
<p>后来，<code>java</code>引入<code>lambda</code>表达式进一步简化了这种写法，上面的<code>say()</code>方法可以改为：</p>
<pre style="background-color:#2b303b;">
<code class="language-java" data-lang="java"><span style="color:#b48ead;">public</span><span style="color:#c0c5ce;"> void </span><span style="color:#bf616a;">say</span><span style="color:#c0c5ce;">(</span><span style="color:#ebcb8b;">String</span><span style="color:#c0c5ce;"> s){
    </span><span style="color:#ebcb8b;">Timer</span><span style="color:#c0c5ce;"> timer=</span><span style="color:#b48ead;">new </span><span style="color:#ebcb8b;">Timer</span><span style="color:#c0c5ce;">(</span><span style="color:#d08770;">1000</span><span style="color:#c0c5ce;">, (</span><span style="color:#ebcb8b;">ActionEvent </span><span style="color:#bf616a;">e</span><span style="color:#c0c5ce;">)</span><span style="color:#b48ead;">-&gt;</span><span style="color:#c0c5ce;">{
        </span><span style="color:#ebcb8b;">System</span><span style="color:#c0c5ce;">.out.</span><span style="color:#bf616a;">println</span><span style="color:#c0c5ce;">(&quot;</span><span style="color:#a3be8c;">这是内部类，但能获取外部类的属性========&gt;</span><span style="color:#c0c5ce;">&quot;+propA+&quot;</span><span style="color:#96b5b4;">\n</span><span style="color:#a3be8c;">还可以获取方法的参数并保存为本地变量========&gt;</span><span style="color:#c0c5ce;">&quot;+s);
    });
    timer.</span><span style="color:#bf616a;">start</span><span style="color:#c0c5ce;">();
}
</span></code></pre>
<p><strong>PS：<code>lambda</code>表达式只能用于代替实现<code>FunctionalInterface</code>接口的内部类，就是内部只有一个抽象方法的接口（default方法数量不限）</strong></p>
<h3 id="1-5-staticnei-bu-lei"><strong>1.5 static内部类</strong></h3>
<p><code>static</code>内部类和别的内部类有几点区别：</p>
<ul>
<li>因为是static,所以使用该类时不需要外部类的实例</li>
<li>无法访问外部类的信息</li>
<li>可以声明<code>static</code>的变量和方法</li>
</ul>
<p><code>static</code>内部类的作用类似package，只是让内部类更深了一层，可以让代码的结构更清晰，减少重名问题等，所以<code>static</code>内部类跟普通的类很像，很多地方称之为&quot;嵌套类&quot;。</p>
<p>关于<code>static</code>和其它内部类实例化的区别：跟类中的<code>static</code>属性一样，在外部类加载完成后，<code>static</code>内部类也加载完成了，所以如果要实例化<code>static</code>内部类，只要用<code>new Outer.Inner()</code>的表达方式就可以了。而普通的非<code>static</code>内部类，因为是定义在类中，属于&quot;对象属性&quot;级别，在外部类加载完成时，这些&quot;对象属性&quot;还不存在，等到外部类实例化时，内部类才作为这个外部类实例对象的&quot;对象属性&quot;加载进来，但此时只是有内部类完成，还没有实例化，需要使用外部类的对象来实例化内部类。</p>
<h2 id="2-jie-kou-zhong-de-qian-tao-jie-kou-he-qian-tao-lei"><strong>2.接口中的嵌套接口和嵌套类</strong></h2>
<p>接口中的类型成员，包括类和接口，都默认是<code>public staic</code>，也强制只能是<code>public static</code>。</p>
<p>首先，接口不能被实例化，所以，任何非<code>static</code>的内容都毫无意义。至于<code>public</code>，<a href="https://docs.oracle.com/javase/tutorial/java/IandI/interfaceDef.html">JavaSE规范</a>中规定，接口中的类型成员不是<code>public</code>就会在编译时报错。</p>
<p>关于这两个嵌套类型，举个例子，<code>spring boot</code>源码中有一个接口叫<code>DeferredImportSelector</code>，代码如下：</p>
<details>
<summary>显示代码</summary>
<pre style="background-color:#2b303b;">
<code class="language-java" data-lang="java"><span style="color:#b48ead;">package </span><span style="color:#c0c5ce;">org.springframework.context.annotation;

</span><span style="color:#b48ead;">import </span><span style="color:#c0c5ce;">org.springframework.core.type.</span><span style="color:#ebcb8b;">AnnotationMetadata</span><span style="color:#c0c5ce;">;
</span><span style="color:#b48ead;">import </span><span style="color:#c0c5ce;">org.springframework.lang.</span><span style="color:#ebcb8b;">Nullable</span><span style="color:#c0c5ce;">;

</span><span style="color:#b48ead;">public interface </span><span style="color:#ebcb8b;">DeferredImportSelector </span><span style="color:#b48ead;">extends </span><span style="color:#a3be8c;">ImportSelector </span><span style="color:#eff1f5;">{

	@</span><span style="color:#bf616a;">Nullable
	</span><span style="color:#b48ead;">default </span><span style="color:#ebcb8b;">Class</span><span style="color:#eff1f5;">&lt;</span><span style="color:#c0c5ce;">? </span><span style="color:#b48ead;">extends </span><span style="color:#ebcb8b;">Group</span><span style="color:#eff1f5;">&gt; </span><span style="color:#8fa1b3;">getImportGroup</span><span style="color:#eff1f5;">() {
		</span><span style="color:#b48ead;">return </span><span style="color:#d08770;">null</span><span style="color:#eff1f5;">;
	}

	</span><span style="color:#b48ead;">interface </span><span style="color:#ebcb8b;">Group </span><span style="color:#eff1f5;">{

		</span><span style="color:#b48ead;">void </span><span style="color:#8fa1b3;">process</span><span style="color:#eff1f5;">(</span><span style="color:#ebcb8b;">AnnotationMetadata </span><span style="color:#bf616a;">metadata</span><span style="color:#eff1f5;">, </span><span style="color:#ebcb8b;">DeferredImportSelector </span><span style="color:#bf616a;">selector</span><span style="color:#eff1f5;">);

		</span><span style="color:#ebcb8b;">Iterable</span><span style="color:#eff1f5;">&lt;</span><span style="color:#ebcb8b;">Entry</span><span style="color:#eff1f5;">&gt; </span><span style="color:#8fa1b3;">selectImports</span><span style="color:#eff1f5;">();

		</span><span style="color:#b48ead;">class </span><span style="color:#ebcb8b;">Entry </span><span style="color:#eff1f5;">{

			</span><span style="color:#b48ead;">private final </span><span style="color:#ebcb8b;">AnnotationMetadata </span><span style="color:#eff1f5;">metadata;

			</span><span style="color:#b48ead;">private final </span><span style="color:#ebcb8b;">String </span><span style="color:#eff1f5;">importClassName;

			</span><span style="color:#b48ead;">public </span><span style="color:#8fa1b3;">Entry</span><span style="color:#eff1f5;">(</span><span style="color:#ebcb8b;">AnnotationMetadata </span><span style="color:#bf616a;">metadata</span><span style="color:#eff1f5;">, </span><span style="color:#ebcb8b;">String </span><span style="color:#bf616a;">importClassName</span><span style="color:#eff1f5;">) {
				</span><span style="color:#bf616a;">this</span><span style="color:#eff1f5;">.metadata </span><span style="color:#c0c5ce;">=</span><span style="color:#eff1f5;"> metadata;
				</span><span style="color:#bf616a;">this</span><span style="color:#eff1f5;">.importClassName </span><span style="color:#c0c5ce;">=</span><span style="color:#eff1f5;"> importClassName;
			}

			</span><span style="color:#b48ead;">public </span><span style="color:#ebcb8b;">AnnotationMetadata </span><span style="color:#8fa1b3;">getMetadata</span><span style="color:#eff1f5;">() {
				</span><span style="color:#b48ead;">return </span><span style="color:#bf616a;">this</span><span style="color:#eff1f5;">.metadata;
			}

			</span><span style="color:#b48ead;">public </span><span style="color:#ebcb8b;">String </span><span style="color:#8fa1b3;">getImportClassName</span><span style="color:#eff1f5;">() {
				</span><span style="color:#b48ead;">return </span><span style="color:#bf616a;">this</span><span style="color:#eff1f5;">.importClassName;
			}

			@</span><span style="color:#bf616a;">Override
			</span><span style="color:#b48ead;">public boolean </span><span style="color:#8fa1b3;">equals</span><span style="color:#eff1f5;">(@</span><span style="color:#bf616a;">Nullable </span><span style="color:#ebcb8b;">Object </span><span style="color:#bf616a;">other</span><span style="color:#eff1f5;">) {
				</span><span style="color:#b48ead;">if </span><span style="color:#eff1f5;">(</span><span style="color:#bf616a;">this </span><span style="color:#c0c5ce;">==</span><span style="color:#eff1f5;"> other) {
					</span><span style="color:#b48ead;">return </span><span style="color:#d08770;">true</span><span style="color:#eff1f5;">;
				}
				</span><span style="color:#b48ead;">if </span><span style="color:#eff1f5;">(other </span><span style="color:#c0c5ce;">== </span><span style="color:#d08770;">null </span><span style="color:#c0c5ce;">|| </span><span style="color:#bf616a;">getClass</span><span style="color:#eff1f5;">() </span><span style="color:#c0c5ce;">!=</span><span style="color:#eff1f5;"> other.</span><span style="color:#bf616a;">getClass</span><span style="color:#eff1f5;">()) {
					</span><span style="color:#b48ead;">return </span><span style="color:#d08770;">false</span><span style="color:#eff1f5;">;
				}
				</span><span style="color:#ebcb8b;">Entry</span><span style="color:#eff1f5;"> entry </span><span style="color:#c0c5ce;">= </span><span style="color:#eff1f5;">(</span><span style="color:#ebcb8b;">Entry</span><span style="color:#eff1f5;">) other;
				</span><span style="color:#b48ead;">return </span><span style="color:#eff1f5;">(</span><span style="color:#bf616a;">this</span><span style="color:#eff1f5;">.metadata.</span><span style="color:#bf616a;">equals</span><span style="color:#eff1f5;">(entry.metadata) </span><span style="color:#c0c5ce;">&amp;&amp; </span><span style="color:#bf616a;">this</span><span style="color:#eff1f5;">.importClassName.</span><span style="color:#bf616a;">equals</span><span style="color:#eff1f5;">(entry.importClassName));
			}

			@</span><span style="color:#bf616a;">Override
			</span><span style="color:#b48ead;">public int </span><span style="color:#8fa1b3;">hashCode</span><span style="color:#eff1f5;">() {
				</span><span style="color:#b48ead;">return </span><span style="color:#eff1f5;">(</span><span style="color:#bf616a;">this</span><span style="color:#eff1f5;">.metadata.</span><span style="color:#bf616a;">hashCode</span><span style="color:#eff1f5;">() </span><span style="color:#c0c5ce;">* </span><span style="color:#d08770;">31 </span><span style="color:#c0c5ce;">+ </span><span style="color:#bf616a;">this</span><span style="color:#eff1f5;">.importClassName.</span><span style="color:#bf616a;">hashCode</span><span style="color:#eff1f5;">());
			}

			@</span><span style="color:#bf616a;">Override
			</span><span style="color:#b48ead;">public </span><span style="color:#ebcb8b;">String </span><span style="color:#8fa1b3;">toString</span><span style="color:#eff1f5;">() {
				</span><span style="color:#b48ead;">return </span><span style="color:#bf616a;">this</span><span style="color:#eff1f5;">.importClassName;
			}
		}
	}

}
</span></code></pre></details>
<p><code>DeferredImportSelector</code>接口中有一个抽象方法<code>getImportGroup</code>，返回的是实现<code>Group</code>接口的对象的Class，<code>Group</code>是一个嵌套接口。通过IDE查看实现或者使用<code>Group</code>的地方，都跟<code>DeferredImportSelector</code>有关，所以定义在其内部作为嵌套接口比较直观、合理。虽然两者经常搭配使用，但从语法上来说，实现外部接口和它的嵌套接口没有必然联系，可以只实现其中的一个。</p>
<p><code>Group</code>接口中还包含一个静态内部类<code>Entry</code>。<code>Group</code>接口中有个抽象方法<code>selectImports</code>返回的是<code>Iterable&lt;Entry&gt;</code>,<code>Entry</code>这个名称很普遍，放到内部类里可以避免重名，并且可以通过外部类的名称直观的看出这个类的作用。</p>
<h2 id="3-zong-jie">3 总结</h2>
<p><code>spring</code>的源码中就经常使用内部类、内部接口等，可以让源码可读性更好，让外部类和内部类直接联系起来。总的来说，内部类和嵌套类、嵌套接口是为了提高程序代码的内聚性而存在的，也是封装思想的一种体现。</p>

    </div>

    
    

    <div class="post-footer">
        
            
            
                <div class="post-nav">
                    
                        <a class="previous" href="https:&#x2F;&#x2F;www.fewth.com&#x2F;spring-bootyong-java-bean-validationjin-xing-shu-ju-yan-zheng&#x2F;">‹ spring boot用java bean validation进行数据验证</a>
                    
                    
                        <a class="next" href="https:&#x2F;&#x2F;www.fewth.com&#x2F;javafan-xing-he-c-mo-ban-de-qu-bie&#x2F;">JAVA泛型和C++模板的区别 ›</a>
                    
                    
                    
                </div>
            

        

    </div>

    
    
</article>


                </div>
            </main>

            
            
        </div>

      
          <script type="text/javascript" src="https:&#x2F;&#x2F;www.fewth.com&#x2F;even.js" ></script>
      
    </body>

</html>
